<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Редактирование Заявки</title>
</head>
<body>
<div layout:fragment="content">
    <h3 class="mt-3 mb-4 text-center">Редактирование Заявки №<span th:text="${request.id}"></span></h3>

    <form th:action="@{'/edit/' + ${request.id}}" method="post">

        <div class="mb-3">
            <label for="userName" class="form-label">ФИО:</label>
            <input type="text" id="userName" name="userName" class="form-control"
                   th:value="${request.userName}" required>
        </div>

        <div class="mb-3">
            <label for="course" class="form-label">Курс:</label>
            <select id="course" name="course" class="form-select">
                <option value="">Выберите курс</option>
                <option th:each="c : ${courses}" th:value="${c.id}" th:text="${c.name} + ' — ' + c.price + '₸'"
                        th:selected="${request.course != null and c.id == request.course.id}"></option>
            </select>
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">Телефон:</label>
            <input type="text" id="phone" name="phone" class="form-control"
                   th:value="${request.phone}" required>
        </div>

        <div class="mb-3">
            <label for="commentary" class="form-label">Комментарии:</label>
            <textarea id="commentary" name="commentary" class="form-control" rows="5"
                      th:text="${request.commentary}"></textarea>
        </div>

        <div class="mb-3 form-check">
            <input type="checkbox" id="handled" name="handled" th:checked="${request.handled}">
            <label class="form-check-label" for="handled">Заявка обработана</label>
        </div>

        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-success">Сохранить изменения</button>
            <a th:href="@{'/details/' + ${request.id}}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
</div>
</body>
</html>