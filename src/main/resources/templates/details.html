<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <title>Детали Заявки</title>
</head>
<body>
<div layout:fragment="content">
  <div class="mb-4">
    <h3 th:if="${!request.handled}" class="text-danger text-center">
      ***Новая необработанная заявка***
    </h3>
    <h3 th:if="${request.handled}" class="text-success text-center">
      Обработанная заявка
    </h3>
  </div>

  <form>
    <div class="mb-3">
      <label for="userName" class="form-label">ФИО :</label>
      <input type="text" id="userName" class="form-control" th:value="${request.userName}" readonly>
    </div>
    <div class="mb-3">
      <label for="courseName" class="form-label">Курс :</label>
      <input type="text" id="courseName" class="form-control" th:value="${request.courseName}" readonly>
    </div>
    <div class="mb-3">
      <label for="phone" class="form-label">Телефон :</label>
      <input type="text" id="phone" class="form-control" th:value="${request.phone}" readonly>
    </div>
    <div class="mb-4">
      <label for="commentary" class="form-label">Комментарии :</label>
      <textarea id="commentary" class="form-control" rows="5" readonly th:text="${request.commentary}"></textarea>
    </div>
  </form>

  <div class="d-flex justify-content-start">

    <a th:href="@{'/edit/' + ${request.id}}" class="btn btn-primary me-2">Редактировать</a>

    <form th:if="${!request.handled}" th:action="@{'/handle_request/' + ${request.id}}" method="post" class="me-2">
      <button type="submit" class="btn btn-success">Обработать заявку</button>
    </form>

    <form th:action="@{'/delete_request/' + ${request.id}}" method="post">
      <button type="submit" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите удалить эту заявку безвозвратно?');">
        Удалить заявку
      </button>
    </form>
  </div>

</div>
</body>
</html>